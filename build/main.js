import CSG from"./lib/cs.js";var scene,camera,renderer,controls;init();function init(){scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),camera.position.y=200,camera.position.z=500,renderer=new THREE.WebGLRenderer,renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(16777215,1),document.body.appendChild(renderer.domElement),controls=new THREE.OrbitControls(camera,renderer.domElement),createLight();var a=new THREE.Mesh(new THREE.PlaneBufferGeometry(3,3,1,1),new THREE.MeshPhongMaterial({color:10530223,shininess:10}));a.scale.multiplyScalar(300),a.receiveShadow=!0,a.rotation.x=-Math.PI/2,a.position.y=-100,scene.add(a),animate(),window.scene=scene}function animate(){requestAnimationFrame(animate),renderer.render(scene,camera),controls.update(),TWEEN.update()}function createLight(){scene.add(new THREE.AmbientLight(16777215,.3));var a=new THREE.SpotLight(16777215,.5);a.angle=Math.PI/5,a.penumbra=.9,a.position.set(20,300,30),a.castShadow=!0,a.shadow.camera.near=3,a.shadow.camera.far=400,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,scene.add(a);var b=new THREE.DirectionalLight(16777215,.5);b.position.set(100,400,300),b.castShadow=!0,b.intensity=.5,scene.add(b)}function doCSG(c,a,b,d){var e=CSG.fromMesh(c),f=CSG.fromMesh(a),g=e[b](f),h=CSG.toMesh(g,c.matrix);return h.material=d,h.castShadow=h.receiveShadow=!0,h}var cubeMeshes=cubeDemo(),sphereMeshes=sphereDemo();window.addEventListener("keypress",a=>{"c"===a.key&&doOperation(cubeMeshes[0],cubeMeshes[1],cubeMeshes[2]),"s"===a.key&&doOperation(sphereMeshes[0],sphereMeshes[1],sphereMeshes[2],!0)});function cubeDemo(){var a=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:16711680,shininess:100}));a.position.x=0;var b=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:65280,shininess:100}));b.position.x=-25;var c=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:255,shininess:100}));return c.position.x=25,b.visible=!1,c.visible=!1,scene.add(a),scene.add(b),scene.add(c),a.updateMatrix(),b.updateMatrix(),c.updateMatrix(),[a,b,c]}function sphereDemo(){var a=new THREE.Mesh(new THREE.SphereGeometry(25,50,50),new THREE.MeshPhongMaterial({color:16711680,shininess:100}));a.position.x=0;var b=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:65280,shininess:100}));b.position.x=-25;var c=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:255,shininess:100}));return c.position.x=25,b.visible=!1,c.visible=!1,scene.add(a),scene.add(b),scene.add(c),a.updateMatrix(),b.updateMatrix(),c.updateMatrix(),a.position.z=200,b.position.z=200,c.position.z=200,[a,b,c]}function doOperation(a,b,c,d){a.visible=!1;var e=doCSG(a,b,"subtract",new THREE.MeshPhongMaterial({color:16711680,shininess:100,wireframe:d}));scene.add(e);var f=doCSG(a,c,"subtract",new THREE.MeshPhongMaterial({color:16711680,shininess:100,wireframe:d}));scene.add(f);var g=new TWEEN.Tween(e.position).to({y:100,x:100},1e4).start(),h=new TWEEN.Tween(f.position).to({y:-100,x:-100},1e4).start()}