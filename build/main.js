var bend,modifier,prevMod;function bendMesh(a){addModifier(a),tweenBend()}function addModifier(a){modifier=new ModifierStack(a),bend=new Bend(1.5,.2,0),bend.constraint=ModConstant.LEFT}function changeModifier(a){prevMod&&modifier.removeModifier(prevMod),modifier.reset(),modifier.addModifier(a),prevMod=a}function tweenBend(){changeModifier(bend),bend.force=0;new TWEEN.Tween(bend).to({force:-1},1e3).easing(TWEEN.Easing.Cubic.InOut).delay(1e3).onUpdate(function(){}).onComplete(function(){}).start()}var scene,camera,renderer,controls;function init(){scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(25,window.innerWidth/window.innerHeight,1,1e4),camera.position.x=50,camera.position.y=100,camera.position.z=200,renderer=new THREE.WebGLRenderer,renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(16777215,1),document.body.appendChild(renderer.domElement),controls=new THREE.OrbitControls(camera,renderer.domElement),createLight();var a=new THREE.Mesh(new THREE.PlaneBufferGeometry(3,3,1,1),new THREE.MeshPhongMaterial({color:10530223,shininess:10}));a.scale.multiplyScalar(300),a.receiveShadow=!0,a.rotation.x=-Math.PI/2,a.position.y=-100,scene.add(a),animate(),window.scene=scene}function animate(){requestAnimationFrame(animate),renderer.render(scene,camera),controls.update(),TWEEN.update(),modifier&&modifier.apply()}function createLight(){scene.add(new THREE.AmbientLight(16777215,.3));var a=new THREE.SpotLight(16777215,.5);a.angle=Math.PI/5,a.penumbra=.9,a.position.set(20,300,30),a.castShadow=!0,a.shadow.camera.near=3,a.shadow.camera.far=400,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,scene.add(a);var b=new THREE.DirectionalLight(16777215,.5);b.position.set(100,400,300),b.castShadow=!0,b.intensity=.5,scene.add(b)}init();