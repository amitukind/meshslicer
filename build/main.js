import CSG from"./lib/cs.js";var scene,camera,renderer,controls,mesh1,mesh2,mesh3,mesh4,mesh5,mesh3bool=!1,mesh4bool=!1;init();function init(){scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),camera.position.y=200,camera.position.z=500,renderer=new THREE.WebGLRenderer,renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(16777215,1),document.body.appendChild(renderer.domElement),controls=new THREE.OrbitControls(camera,renderer.domElement),createLight();var a=new THREE.Mesh(new THREE.PlaneBufferGeometry(3,3,1,1),new THREE.MeshPhongMaterial({color:10530223,shininess:10}));a.scale.multiplyScalar(300),a.receiveShadow=!0,a.rotation.x=-Math.PI/2,a.position.y=-100,scene.add(a),deformDemo(),animate(),window.scene=scene}function animate(){requestAnimationFrame(animate),renderer.render(scene,camera),controls.update(),mesh3bool&&(mesh3.position.y+=.1),mesh4bool&&(mesh4.position.y-=.1)}function createLight(){scene.add(new THREE.AmbientLight(16777215,.3));var a=new THREE.SpotLight(16777215,.5);a.angle=Math.PI/5,a.penumbra=.9,a.position.set(20,300,30),a.castShadow=!0,a.shadow.camera.near=3,a.shadow.camera.far=400,a.shadow.mapSize.width=1024,a.shadow.mapSize.height=1024,scene.add(a);var b=new THREE.DirectionalLight(16777215,.5);b.position.set(100,400,300),b.castShadow=!0,b.intensity=.5,scene.add(b)}function deformDemo(){mesh1=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:16711680,shininess:100})),mesh1.position.x=0,scene.add(mesh1),mesh2=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:65280,shininess:100})),mesh2.position.x=-25,mesh3=new THREE.Mesh(new THREE.BoxGeometry(50,50,50),new THREE.MeshPhongMaterial({color:255,shininess:100})),mesh3.position.x=25,mesh2.visible=!1,mesh3.visible=!1,scene.add(mesh2),scene.add(mesh3),mesh1.updateMatrix(),mesh2.updateMatrix()}function doCSG(c,a,b,d){var e=CSG.fromMesh(c),f=CSG.fromMesh(a),g=e[b](f),h=CSG.toMesh(g,c.matrix);return h.material=d,h.castShadow=h.receiveShadow=!0,h}function doOperation(){mesh1.visible=!1,mesh3=doCSG(mesh1,mesh2,"subtract",new THREE.MeshPhongMaterial({color:65280,shininess:100})),scene.add(mesh3),mesh3bool=!0,mesh4=doCSG(mesh1,mesh3,"subtract",new THREE.MeshPhongMaterial({color:65280,shininess:100})),scene.add(mesh4),mesh4bool=!0}window.addEventListener("click",doOperation);